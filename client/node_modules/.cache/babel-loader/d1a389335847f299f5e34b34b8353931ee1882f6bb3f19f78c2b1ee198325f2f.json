{"ast":null,"code":"var _jsxFileName = \"/home/oumaima/Documents/QuizWebApp/client/src/components/PrivateRoute.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { useContext, createContext } from 'react';\nimport request from './requests';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nexport const useAuth = () => {\n  _s();\n  return useContext(AuthContext);\n};\n_s(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nconst PrivateRoute = ({\n  children,\n  accessible = true\n}) => {\n  _s2();\n  const [isAuthenticated, setIsAuthenticated] = useState();\n  const [doneLoading, setDoneLoading] = useState(false);\n  const [user, setUser] = useState(null);\n  const logout = () => {\n    setUser(null);\n  };\n  useEffect(() => {\n    const checkAuth = async () => {\n      try {\n        const res = await request.get(\"http://127.0.0.1:5000/@me\");\n        if (res.status === 200) {\n          setUser(res.data.user);\n          setIsAuthenticated(true);\n        } else {\n          setIsAuthenticated(false);\n        }\n      } catch {\n        console.log(\"UNAUTHERIZED\");\n      } finally {\n        setDoneLoading(true);\n      }\n    };\n    checkAuth();\n  }, []);\n  if (!doneLoading) return null; // Blank screen during loading\n\n  if (accessible) {\n    return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n      value: {\n        user,\n        logout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this);\n  }\n  return isAuthenticated ? /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 13\n  }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/login\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 13\n  }, this);\n};\n_s2(PrivateRoute, \"5dZB6MNnW/sOTVqBA7VFOg5NfAs=\");\n_c = PrivateRoute;\nexport default PrivateRoute;\nvar _c;\n$RefreshReg$(_c, \"PrivateRoute\");","map":{"version":3,"names":["React","useEffect","useState","Navigate","useContext","createContext","request","jsxDEV","_jsxDEV","AuthContext","useAuth","_s","PrivateRoute","children","accessible","_s2","isAuthenticated","setIsAuthenticated","doneLoading","setDoneLoading","user","setUser","logout","checkAuth","res","get","status","data","console","log","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","to","_c","$RefreshReg$"],"sources":["/home/oumaima/Documents/QuizWebApp/client/src/components/PrivateRoute.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { useContext, createContext } from 'react';\nimport request from './requests';\n\nconst AuthContext = createContext();\nexport const useAuth = () => useContext(AuthContext);\n\nconst PrivateRoute = ({ children, accessible=true }) => {\n    const [isAuthenticated, setIsAuthenticated] = useState();\n    const [doneLoading, setDoneLoading] = useState(false);\n    const [user, setUser] = useState(null);\n\n    const logout = () => {\n        setUser(null);\n    }\n\n    useEffect(() => {\n        const checkAuth = async () => {\n            try {\n                const res = await request.get(\"http://127.0.0.1:5000/@me\")\n                if (res.status === 200) {\n                    setUser(res.data.user)\n                    setIsAuthenticated(true);\n                } else {\n                    setIsAuthenticated(false);\n                }\n            } catch {\n                console.log(\"UNAUTHERIZED\");\n            }\n            finally {\n                setDoneLoading(true);\n            }\n        };\n        checkAuth();\n    }, []);\n    if (!doneLoading) return null; // Blank screen during loading\n\n    if (accessible) {\n        return (\n            <AuthContext.Provider value={{ user, logout }}>\n                {children}\n            </AuthContext.Provider>\n        )\n    }\n\n    return (\n        isAuthenticated ? (\n            <AuthContext.Provider value={{ user }}>\n                {children}\n            </AuthContext.Provider>\n        ) : (\n            <Navigate to=\"/login\" />\n        )\n    );\n};\n\nexport default PrivateRoute;"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,QAAQ,QAAQ,kBAAkB;AAC3C,SAASC,UAAU,EAAEC,aAAa,QAAQ,OAAO;AACjD,OAAOC,OAAO,MAAM,YAAY;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEjC,MAAMC,WAAW,gBAAGJ,aAAa,CAAC,CAAC;AACnC,OAAO,MAAMK,OAAO,GAAGA,CAAA;EAAAC,EAAA;EAAA,OAAMP,UAAU,CAACK,WAAW,CAAC;AAAA;AAACE,EAAA,CAAxCD,OAAO;AAEpB,MAAME,YAAY,GAAGA,CAAC;EAAEC,QAAQ;EAAEC,UAAU,GAAC;AAAK,CAAC,KAAK;EAAAC,GAAA;EACpD,MAAM,CAACC,eAAe,EAAEC,kBAAkB,CAAC,GAAGf,QAAQ,CAAC,CAAC;EACxD,MAAM,CAACgB,WAAW,EAAEC,cAAc,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACkB,IAAI,EAAEC,OAAO,CAAC,GAAGnB,QAAQ,CAAC,IAAI,CAAC;EAEtC,MAAMoB,MAAM,GAAGA,CAAA,KAAM;IACjBD,OAAO,CAAC,IAAI,CAAC;EACjB,CAAC;EAEDpB,SAAS,CAAC,MAAM;IACZ,MAAMsB,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC1B,IAAI;QACA,MAAMC,GAAG,GAAG,MAAMlB,OAAO,CAACmB,GAAG,CAAC,2BAA2B,CAAC;QAC1D,IAAID,GAAG,CAACE,MAAM,KAAK,GAAG,EAAE;UACpBL,OAAO,CAACG,GAAG,CAACG,IAAI,CAACP,IAAI,CAAC;UACtBH,kBAAkB,CAAC,IAAI,CAAC;QAC5B,CAAC,MAAM;UACHA,kBAAkB,CAAC,KAAK,CAAC;QAC7B;MACJ,CAAC,CAAC,MAAM;QACJW,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;MAC/B,CAAC,SACO;QACJV,cAAc,CAAC,IAAI,CAAC;MACxB;IACJ,CAAC;IACDI,SAAS,CAAC,CAAC;EACf,CAAC,EAAE,EAAE,CAAC;EACN,IAAI,CAACL,WAAW,EAAE,OAAO,IAAI,CAAC,CAAC;;EAE/B,IAAIJ,UAAU,EAAE;IACZ,oBACIN,OAAA,CAACC,WAAW,CAACqB,QAAQ;MAACC,KAAK,EAAE;QAAEX,IAAI;QAAEE;MAAO,CAAE;MAAAT,QAAA,EACzCA;IAAQ;MAAAmB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACS,CAAC;EAE/B;EAEA,OACInB,eAAe,gBACXR,OAAA,CAACC,WAAW,CAACqB,QAAQ;IAACC,KAAK,EAAE;MAAEX;IAAK,CAAE;IAAAP,QAAA,EACjCA;EAAQ;IAAAmB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACS,CAAC,gBAEvB3B,OAAA,CAACL,QAAQ;IAACiC,EAAE,EAAC;EAAQ;IAAAJ,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAC1B;AAET,CAAC;AAACpB,GAAA,CA/CIH,YAAY;AAAAyB,EAAA,GAAZzB,YAAY;AAiDlB,eAAeA,YAAY;AAAC,IAAAyB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}